#!/usr/bin/env bb

(require '[babashka.pods :as pods])
(pods/load-pod "./pod-babashka-aws")
(require '[pod.babashka.aws :as aws])
(def cfn (aws/client {:api :cloudformation}))

(print (aws/ops cfn))

(def s3 (aws/client {:api :s3}))

(println (:ListBuckets (aws/ops s3)))

(aws/doc s3 :ListBuckets)

(if (and (System/getenv "AWS_ACCESS_KEY_ID") (System/getenv "AWS_SECRET_ACCESS_KEY"))
  (println (aws/invoke s3 {:op :ListBuckets}))
  (println "No credentials"))
    
